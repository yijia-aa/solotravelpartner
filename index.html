<!-- <!-- public/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Voyago</title>
    <link rel="stylesheet" href="/css/styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

    <header>
        <h1>Voyago</h1>
    </header>

    <nav>
        <ul>
            <li><a href="#" data-tab="main-tab" class="active">Travel Plan</a></li>
            <li><a href="#" data-tab="urgent-tab">Urgent Needs</a></li>
            <li><a href="#" data-tab="live-company-tab">Live Company</a></li>
            <li><a href="#" data-tab="feedback-tab">Feedback</a></li>
        </ul>
    </nav>

    <main>
        <!-- Main Tab -->
        <section id="main-tab" class="tab-content active">
            <h2>Travel Plan</h2>
            <form id="travel-plan-form">
                <p>Choose your travelling style:</p>
                <label>
                    <input type="radio" name="travel-style" value="flexible" checked>
                    Flexible
                </label>
                <label>
                    <input type="radio" name="travel-style" value="planned">
                    Planned
                </label>

                <p>Enter your current location:</p>
                <input type="text" id="location-input" placeholder="e.g., Paris">

                <div class="buttons">
                    <button type="button" onclick="getWeatherRecommendation()">Get Weather & Clothing Advice</button>
                    <button type="button" onclick="getTouristAttractions()">Recommend Tourist Attractions</button>
                    <button type="button" onclick="getFoodCultureAdvice()">Food & Culture Advice</button>
                </div>
            </form>
            <div id="travel-plan-results" class="results"></div>
        </section>

        <!-- Urgent Needs Tab -->
        <section id="urgent-tab" class="tab-content">
            <h2>Urgent Needs</h2>
            <button type="button" onclick="findNearestRestroom()">Find Nearest Restroom</button>

            <h3>Emergency Contact</h3>
            <form id="emergency-contact-form">
                <p>Your Name:</p>
                <input type="text" id="username" placeholder="Your Name">
                <p>Emergency Contact Number (WhatsApp):</p>
                <input type="text" id="contact-number" placeholder="+1234567890">
                <button type="button" onclick="sendEmergencyMessage()">Send SOS Message</button>
            </form>
            <div id="urgent-needs-results" class="results"></div>
        </section>

        <!-- Live Company Tab -->
        <section id="live-company-tab" class="tab-content">
            <h2>Live Company</h2>
            <div id="chat-window" class="chat-window"></div>
            <textarea id="live-chat-input" placeholder="Talk with your travel companion..."></textarea>
            <button type="button" onclick="liveChat()">Send</button>
        </section>

        <!-- Feedback Tab -->
        <section id="feedback-tab" class="tab-content">
            <h2>Feedback</h2>
            <p>Please let us know your thoughts!</p>
            <form id="feedback-form">
                <textarea id="feedback-input" placeholder="Your feedback..." rows="4"></textarea>
                <button type="button" onclick="submitFeedback()">Submit Feedback</button>
            </form>

            <h3>Contact Us</h3>
            <p>Email: support@solotravellerpal.com</p>
            <p>Phone: +123 456 7890</p>
        </section>
    </main>

    <footer>
        <p>&copy; 2023 Solo Traveller Pal</p>
    </footer>

    <script src="/js/script.js"></script>
</body>
</html>
 -->


 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Voyago</title>
    <link rel="stylesheet" href="/css/styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

    <header>
        <h1>Voyago</h1>
    </header>

    <nav>
        <ul>
            <li><a href="#" data-tab="main-tab" class="active">Travel Plan</a></li>
            <li><a href="#" data-tab="urgent-tab">Urgent Needs</a></li>
            <li><a href="#" data-tab="live-company-tab">Live Company</a></li>
            <li><a href="#" data-tab="feedback-tab">Feedback</a></li>
        </ul>
    </nav>

    <main>
        <!-- Main Tab -->
        <section id="main-tab" class="tab-content active">
            <h2>Travel Plan</h2>
            <form id="travel-plan-form">
                <p>Choose your travelling style:</p>
                <label>
                    <input type="radio" name="travel-style" value="flexible" checked>
                    Flexible
                </label>
                <label>
                    <input type="radio" name="travel-style" value="planned">
                    Planned
                </label>

                <p>Enter your current location:</p>
                <input type="text" id="location-input" placeholder="e.g., Paris">

                <div class="buttons">
                    <button type="button" onclick="getWeatherRecommendation()">Get Weather & Clothing Advice</button>
                    <button type="button" onclick="getTouristAttractions()">Recommend Tourist Attractions</button>
                    <button type="button" onclick="getFoodCultureAdvice()">Food & Culture Advice</button>
                </div>
            </form>
            <div id="travel-plan-results" class="results"></div>
        </section>

        <!-- Urgent Needs Tab -->
        <section id="urgent-tab" class="tab-content">
            <h2>Urgent Needs</h2>
            <button type="button" onclick="findNearestRestroom()">Find Nearest Restroom</button>

            <h3>Emergency Contact</h3>
            <form id="emergency-contact-form">
                <p>Your Name:</p>
                <input type="text" id="username" placeholder="Your Name">
                <p>Emergency Contact Number (WhatsApp):</p>
                <input type="text" id="contact-number" placeholder="+1234567890">
                <button type="button" onclick="sendEmergencyMessage()">Send SOS Message</button>
            </form>
            <div id="urgent-needs-results" class="results"></div>
        </section>

        <!-- Live Company Tab -->
        <section id="live-company-tab" class="tab-content">
            <h2>Live Company</h2>
            <div id="chat-window" class="chat-window"></div>
            <textarea id="live-chat-input" placeholder="Talk with your travel companion..."></textarea>
            <button type="button" onclick="liveChat()">Send</button>
        </section>

        <!-- Feedback Tab -->
        <section id="feedback-tab" class="tab-content">
            <h2>Feedback</h2>
            <p>Please let us know your thoughts!</p>
            <form id="feedback-form">
                <textarea id="feedback-input" placeholder="Your feedback..." rows="4"></textarea>
                <button type="button" onclick="submitFeedback()">Submit Feedback</button>
            </form>

            <h3>Contact Us</h3>
            <p>Email: support@solotravellerpal.com</p>
            <p>Phone: +123 456 7890</p>
        </section>
    </main>

    <footer>
        <p>&copy; 2023 Solo Traveller Pal</p>
    </footer>

    <script>
        async function getWeatherRecommendation() {
            const apiKey = '6iTH4QKVAT4yjfbPAq1KnM3WgEoTNhA3';
            const externalUserId = '007';

            // Step 1: Create Chat Session
            const createSessionUrl = 'https://api.on-demand.io/chat/v1/sessions';
            const createSessionHeaders = {
                'apikey': apiKey,
                'Content-Type': 'application/json'
            };
            const createSessionBody = JSON.stringify({
                "pluginIds": [],
                "externalUserId": externalUserId
            });

            try {
                // Make the request to create a chat session
                const createSessionResponse = await fetch(createSessionUrl, {
                    method: 'POST',
                    headers: createSessionHeaders,
                    body: createSessionBody
                });

                const createSessionData = await createSessionResponse.json();
                const sessionId = createSessionData.data.id;

                // Step 2: Submit Query
                const submitQueryUrl = `https://api.on-demand.io/chat/v1/sessions/${sessionId}/query`;
                const submitQueryHeaders = {
                    'apikey': apiKey,
                    'Content-Type': 'application/json'
                };
                const submitQueryBody = JSON.stringify({
                    "endpointId": "predefined-openai-gpt4o",
                    "query": "What's the weather like?",
                    "pluginIds": ["plugin-1712327325", "plugin-1713962163", "plugin-1723275191", "plugin-1713924030"],
                    "responseMode": "sync"
                });

                // Make the request to submit a query
                const queryResponse = await fetch(submitQueryUrl, {
                    method: 'POST',
                    headers: submitQueryHeaders,
                    body: submitQueryBody
                });

                const queryResponseData = await queryResponse.json();

                // Output the response to the HTML element with id "travel-plan-results"
                document.getElementById('travel-plan-results').textContent = 
                    queryResponseData.data.response || 'No response data available';

            } catch (error) {
                console.error('Error fetching weather recommendation:', error);
                document.getElementById('travel-plan-results').textContent = 'Error fetching weather recommendation. Check console for details.';
            }
        }
    </script>
</body>
</html>
